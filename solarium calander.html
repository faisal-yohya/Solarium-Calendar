<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solarium Calendar - 33-Year Cosmic Cycle</title>
    <style>
        /* ============================================
           ROOT VARIABLES & RESET
           ============================================ */
        :root {
            /* Color Scheme */
            --color-lunar-month: #e0e0e0;
            --color-intercalary: #e74c3c;
            --color-intercalary-light: #fadbd8;
            --color-spring: #a8e6cf;
            --color-summer: #ffeaa7;
            --color-autumn: #f39c12;
            --color-winter: #87ceeb;
            
            /* UI Colors */
            --color-primary: #2c3e50;
            --color-secondary: #34495e;
            --color-accent: #3498db;
            --color-text: #2c3e50;
            --color-text-light: #7f8c8d;
            --color-background: #f8f9fa;
            --color-white: #ffffff;
            --color-border: #bdc3c7;
            
            /* Typography */
            --font-primary: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --font-mono: 'Courier New', Courier, monospace;
            
            /* Spacing */
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            
            /* Border Radius */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            
            /* Shadows */
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.12);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 25px rgba(0,0,0,0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* ============================================
           BASE STYLES
           ============================================ */
        body {
            font-family: var(--font-primary);
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: var(--color-text);
            line-height: 1.6;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: var(--spacing-lg);
        }

        /* ============================================
           HEADER SECTION
           ============================================ */
        .header {
            text-align: center;
            padding: var(--spacing-xl) var(--spacing-md);
            background: var(--color-white);
            border-radius: var(--radius-lg);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--shadow-lg);
        }

        .header h1 {
            font-size: 2.5rem;
            color: var(--color-primary);
            margin-bottom: var(--spacing-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-md);
        }

        .header h1 .icon {
            font-size: 3rem;
        }

        .header .subtitle {
            font-size: 1.2rem;
            color: var(--color-text-light);
            margin-bottom: var(--spacing-md);
        }

        .header .epoch-info {
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            color: var(--color-white);
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--radius-md);
            display: inline-block;
            font-weight: 500;
        }

        .header .epoch-info span {
            color: var(--color-summer);
            font-weight: 700;
        }

        /* ============================================
           INFO PANEL
           ============================================ */
        .info-panel {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
        }

        .info-card {
            background: var(--color-white);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-md);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .info-card h3 {
            color: var(--color-primary);
            margin-bottom: var(--spacing-sm);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .info-card p {
            color: var(--color-text-light);
            font-size: 0.95rem;
        }

        .info-card .value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-accent);
            margin: var(--spacing-sm) 0;
        }

        /* ============================================
           CONTROLS
           ============================================ */
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            justify-content: center;
            margin-bottom: var(--spacing-xl);
            padding: var(--spacing-lg);
            background: var(--color-white);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
        }

        .btn {
            padding: var(--spacing-sm) var(--spacing-lg);
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .btn-primary {
            background: var(--color-accent);
            color: var(--color-white);
        }

        .btn-primary:hover {
            background: #2980b9;
            transform: scale(1.05);
        }

        .btn-secondary {
            background: var(--color-secondary);
            color: var(--color-white);
        }

        .btn-secondary:hover {
            background: var(--color-primary);
            transform: scale(1.05);
        }

        .btn-danger {
            background: var(--color-intercalary);
            color: var(--color-white);
        }

        .btn-danger:hover {
            background: #c0392b;
            transform: scale(1.05);
        }

        .cycle-indicator {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-lg);
            background: var(--color-background);
            border-radius: var(--radius-md);
            font-weight: 600;
            color: var(--color-primary);
        }

        /* ============================================
           LEGEND
           ============================================ */
        .legend {
            background: var(--color-white);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--shadow-md);
        }

        .legend h3 {
            color: var(--color-primary);
            margin-bottom: var(--spacing-md);
            text-align: center;
        }

        .legend-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-md);
        }

        .legend-section {
            padding: var(--spacing-md);
            background: var(--color-background);
            border-radius: var(--radius-sm);
        }

        .legend-section h4 {
            font-size: 0.9rem;
            color: var(--color-text-light);
            margin-bottom: var(--spacing-sm);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-xs);
        }

        .legend-color {
            width: 24px;
            height: 24px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--color-border);
        }

        .legend-symbol {
            width: 24px;
            text-align: center;
            font-size: 1.1rem;
        }

        /* ============================================
           CALENDAR TABLE
           ============================================ */
        .calendar-wrapper {
            background: var(--color-white);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            box-shadow: var(--shadow-lg);
            overflow-x: auto;
            margin-bottom: var(--spacing-xl);
        }

        .calendar-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        .calendar-table th,
        .calendar-table td {
            padding: var(--spacing-sm);
            text-align: center;
            border: 1px solid var(--color-border);
            min-width: 70px;
            position: relative;
        }

        .calendar-table thead th {
            background: var(--color-primary);
            color: var(--color-white);
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .calendar-table thead th.month-header {
            font-size: 0.8rem;
        }

        .calendar-table tbody tr:hover {
            background: rgba(52, 152, 219, 0.1);
        }

        .calendar-table .year-cell {
            background: var(--color-secondary);
            color: var(--color-white);
            font-weight: 700;
            position: sticky;
            left: 0;
            z-index: 5;
        }

        /* Month Cell Styles */
        .month-cell {
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .month-cell:hover {
            transform: scale(1.1);
            z-index: 20;
            box-shadow: var(--shadow-md);
        }

        .month-cell.lunar {
            background: var(--color-lunar-month);
        }

        .month-cell.intercalary {
            background: var(--color-intercalary);
            color: var(--color-white);
            font-weight: 700;
        }

        .month-cell.spring {
            background: var(--color-spring);
        }

        .month-cell.summer {
            background: var(--color-summer);
        }

        .month-cell.autumn {
            background: var(--color-autumn);
            color: var(--color-white);
        }

        .month-cell.winter {
            background: var(--color-winter);
        }

        .month-cell.current {
            outline: 3px solid var(--color-accent);
            outline-offset: -3px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(52, 152, 219, 0); }
        }

        .month-cell .month-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .month-cell .month-name {
            font-weight: 600;
            font-size: 0.85rem;
        }

        .month-cell .month-days {
            font-size: 0.7rem;
            opacity: 0.8;
        }

        .month-cell .moon-phase {
            font-size: 1rem;
        }

        .month-cell .solar-event {
            font-size: 0.9rem;
            position: absolute;
            top: 2px;
            right: 2px;
        }

        /* Intercalary Month Cell */
        .intercalary-cell {
            background: linear-gradient(135deg, var(--color-intercalary), #c0392b);
            color: var(--color-white);
        }

        .intercalary-cell .month-name {
            font-size: 0.75rem;
        }

        /* ============================================
           TOOLTIP
           ============================================ */
        .tooltip {
            position: fixed;
            background: var(--color-primary);
            color: var(--color-white);
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            font-size: 0.85rem;
            max-width: 250px;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            box-shadow: var(--shadow-lg);
        }

        .tooltip.visible {
            opacity: 1;
        }

        .tooltip h4 {
            margin-bottom: var(--spacing-xs);
            color: var(--color-summer);
        }

        .tooltip p {
            margin-bottom: var(--spacing-xs);
            font-size: 0.8rem;
        }

        .tooltip .phase-icon {
            font-size: 1.5rem;
            margin-right: var(--spacing-sm);
        }

        /* ============================================
           COSMIC NOTES
           ============================================ */
        .cosmic-notes {
            background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            color: var(--color-white);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
            box-shadow: var(--shadow-lg);
        }

        .cosmic-notes h2 {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
        }

        .cosmic-notes .note {
            background: rgba(255,255,255,0.1);
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            margin-bottom: var(--spacing-md);
            border-left: 4px solid var(--color-summer);
        }

        .cosmic-notes .note h4 {
            color: var(--color-summer);
            margin-bottom: var(--spacing-xs);
        }

        .cosmic-notes .note p {
            opacity: 0.9;
            font-size: 0.95rem;
        }

        .cosmic-notes .alignment-box {
            background: rgba(255,255,255,0.15);
            padding: var(--spacing-lg);
            border-radius: var(--radius-md);
            text-align: center;
            margin-top: var(--spacing-lg);
        }

        .cosmic-notes .alignment-box .big-icon {
            font-size: 3rem;
            display: block;
            margin-bottom: var(--spacing-sm);
        }

        /* ============================================
           STATISTICS SECTION
           ============================================ */
        .statistics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--spacing-md);
            background: var(--color-white);
            padding: var(--spacing-lg);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--spacing-xl);
        }

        .stat-item {
            text-align: center;
            padding: var(--spacing-md);
            border-radius: var(--radius-sm);
            background: var(--color-background);
        }

        .stat-item .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--color-accent);
        }

        .stat-item .stat-label {
            font-size: 0.8rem;
            color: var(--color-text-light);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* ============================================
           FOOTER
           ============================================ */
        .footer {
            text-align: center;
            padding: var(--spacing-xl);
            background: var(--color-white);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
        }

        .footer p {
            color: var(--color-text-light);
            font-size: 0.9rem;
        }

        .footer .author {
            font-weight: 600;
            color: var(--color-primary);
        }

        /* ============================================
           RESPONSIVE DESIGN
           ============================================ */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8rem;
                flex-direction: column;
            }

            .header h1 .icon {
                font-size: 2.5rem;
            }

            .controls {
                flex-direction: column;
                align-items: stretch;
            }

            .btn {
                justify-content: center;
            }

            .calendar-table {
                font-size: 0.7rem;
            }

            .calendar-table th,
            .calendar-table td {
                padding: var(--spacing-xs);
                min-width: 50px;
            }

            .month-cell .moon-phase {
                font-size: 0.8rem;
            }

            .month-cell .solar-event {
                display: none;
            }

            .legend-grid {
                grid-template-columns: 1fr;
            }

            .cosmic-notes {
                padding: var(--spacing-md);
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: var(--spacing-sm);
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .info-panel {
                grid-template-columns: 1fr;
            }

            .calendar-table th,
            .calendar-table td {
                min-width: 40px;
                font-size: 0.6rem;
            }
        }

        /* ============================================
           PRINT STYLES
           ============================================ */
        @media print {
            body {
                background: white;
            }

            .controls, .tooltip {
                display: none;
            }

            .calendar-wrapper {
                box-shadow: none;
                border: 1px solid #ccc;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <h1>
                <span class="icon">üåå</span>
                Solarium Calendar
                <span class="icon">‚òÄÔ∏è</span>
            </h1>
            <p class="subtitle">A 33-Year Cosmic Cycle Aligning Lunar Months with Solar Seasons</p>
            <div class="epoch-info">
                Epoch: <span>Formation of Earth-Moon-Sun System</span> (~4.567 Billion Years Ago)
            </div>
        </header>

        <!-- Info Panel -->
        <section class="info-panel">
            <div class="info-card">
                <h3>üåô Lunar Cycle</h3>
                <div class="value">12</div>
                <p>Standard lunar months per year, each ~29.53 days (synodic month)</p>
            </div>
            <div class="info-card">
                <h3>‚òÄÔ∏è Solar Alignment</h3>
                <div class="value">33</div>
                <p>Years for complete lunisolar realignment with seasonal markers</p>
            </div>
            <div class="info-card">
                <h3>üìÖ Intercalary Months</h3>
                <div class="value">13</div>
                <p>Extra months (I1-I13) distributed across the cycle to maintain alignment</p>
            </div>
            <div class="info-card">
                <h3>‚è±Ô∏è Total Days</h3>
                <div class="value" id="total-days">12,045</div>
                <p>Approximate days in one complete Solarium cycle</p>
            </div>
        </section>

        <!-- Controls -->
        <section class="controls">
            <button class="btn btn-primary" onclick="previousCycle()">
                ‚¨ÖÔ∏è Previous Cycle
            </button>
            <div class="cycle-indicator">
                <span>Current Cycle:</span>
                <strong id="cycle-number">1</strong>
            </div>
            <button class="btn btn-primary" onclick="nextCycle()">
                Next Cycle ‚û°Ô∏è
            </button>
            <button class="btn btn-secondary" onclick="toggleSeasonView()">
                üåà Toggle Season View
            </button>
            <button class="btn btn-secondary" onclick="highlightIntercalary()">
                üî¥ Highlight Intercalary
            </button>
            <button class="btn btn-danger" onclick="resetCalendar()">
                üîÑ Reset
            </button>
        </section>

        <!-- Legend -->
        <section class="legend">
            <h3>üìñ Calendar Legend</h3>
            <div class="legend-grid">
                <div class="legend-section">
                    <h4>Month Types</h4>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--color-lunar-month);"></div>
                        <span>Standard Lunar Month</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--color-intercalary);"></div>
                        <span>Intercalary Month (I1-I13)</span>
                    </div>
                </div>
                <div class="legend-section">
                    <h4>Seasons</h4>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--color-spring);"></div>
                        <span>Spring (Months 1-3)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--color-summer);"></div>
                        <span>Summer (Months 4-6)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--color-autumn);"></div>
                        <span>Autumn (Months 7-9)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--color-winter);"></div>
                        <span>Winter (Months 10-12)</span>
                    </div>
                </div>
                <div class="legend-section">
                    <h4>Moon Phases</h4>
                    <div class="legend-item">
                        <span class="legend-symbol">üåë</span>
                        <span>New Moon</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-symbol">üåì</span>
                        <span>First Quarter</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-symbol">üåï</span>
                        <span>Full Moon</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-symbol">üåó</span>
                        <span>Last Quarter</span>
                    </div>
                </div>
                <div class="legend-section">
                    <h4>Solar Events</h4>
                    <div class="legend-item">
                        <span class="legend-symbol">üå∏</span>
                        <span>Vernal Equinox</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-symbol">‚òÄÔ∏è</span>
                        <span>Summer Solstice</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-symbol">üçÇ</span>
                        <span>Autumnal Equinox</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-symbol">‚ùÑÔ∏è</span>
                        <span>Winter Solstice</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Calendar Table -->
        <section class="calendar-wrapper">
            <table class="calendar-table" id="calendar-table">
                <thead>
                    <tr>
                        <th>Year</th>
                        <th class="month-header">M1<br>üå∏</th>
                        <th class="month-header">M2</th>
                        <th class="month-header">M3</th>
                        <th class="month-header">M4<br>‚òÄÔ∏è</th>
                        <th class="month-header">M5</th>
                        <th class="month-header">M6</th>
                        <th class="month-header">M7<br>üçÇ</th>
                        <th class="month-header">M8</th>
                        <th class="month-header">M9</th>
                        <th class="month-header">M10<br>‚ùÑÔ∏è</th>
                        <th class="month-header">M11</th>
                        <th class="month-header">M12</th>
                        <th class="month-header">Intercalary</th>
                    </tr>
                </thead>
                <tbody id="calendar-body">
                    <!-- Generated by JavaScript -->
                </tbody>
            </table>
        </section>

        <!-- Statistics -->
        <section class="statistics">
            <div class="stat-item">
                <div class="stat-value">396</div>
                <div class="stat-label">Standard Months</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">13</div>
                <div class="stat-label">Intercalary Months</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">409</div>
                <div class="stat-label">Total Months</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">~12,045</div>
                <div class="stat-label">Days per Cycle</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">~354</div>
                <div class="stat-label">Lunar Year (days)</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">~365</div>
                <div class="stat-label">Solar Year (days)</div>
            </div>
        </section>

        <!-- Cosmic Notes -->
        <section class="cosmic-notes">
            <h2>üåå Cosmic Calendar Notes</h2>
            
            <div class="note">
                <h4>üî≠ Cosmic-Based Timekeeping</h4>
                <p>
                    The Solarium Calendar is fundamentally cosmic-based, using the natural rhythms of 
                    celestial bodies rather than arbitrary human conventions. It tracks the Moon's 
                    synodic cycle (~29.53 days), Earth's orbital period around the Sun (~365.24 days), 
                    and the long-term alignment pattern that emerges over 33 years.
                </p>
            </div>
            
            <div class="note">
                <h4>üåô Lunisolar Synchronization</h4>
                <p>
                    The lunar year (12 synodic months ‚âà 354.37 days) is approximately 10.88 days 
                    shorter than the tropical solar year. Over 33 years, this difference accumulates 
                    to approximately 359 days‚Äînearly one full year. By adding 13 intercalary months 
                    (each ~29.53 days = 384 days total), the calendar realigns lunar months with 
                    solar seasons.
                </p>
            </div>
            
            <div class="note">
                <h4>üìê Mathematical Foundation</h4>
                <p>
                    33 solar years ‚âà 12,045 days<br>
                    408 synodic months ‚âà 12,045 days<br>
                    Therefore: 33 years = 408 lunar months = 396 standard + 12-13 intercalary months
                </p>
            </div>
            
            <div class="note">
                <h4>üåç Historical Significance</h4>
                <p>
                    This 33-year cycle has been recognized in various calendar systems throughout 
                    history. It provides a natural framework for tracking both lunar observances 
                    and seasonal agricultural activities, bridging different timekeeping traditions.
                </p>
            </div>

            <div class="alignment-box">
                <span class="big-icon">üîÑ</span>
                <strong>After Year 33, the cycle repeats!</strong>
                <p>Lunar months return to their original alignment with solar seasons, 
                   and a new 33-year Solarium cycle begins.</p>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>
                <strong>Solarium Calendar</strong> ‚Äî A Conceptual Temporal Reference Framework for Cosmic-Scale Time
            </p>
            <p class="author">
                Based on the work by Muhammad Faisal bin Yohya (January 2026)
            </p>
            <p>
                üåô Moon Cycles ‚Ä¢ ‚òÄÔ∏è Solar Seasons ‚Ä¢ üåå Cosmic Alignment
            </p>
        </footer>
    </div>

    <!-- Tooltip Element -->
    <div class="tooltip" id="tooltip">
        <h4 id="tooltip-title">Month Info</h4>
        <p id="tooltip-content"></p>
    </div>

    <script>
        // ============================================
        // CALENDAR DATA & CONFIGURATION
        // ============================================
        
        const CONFIG = {
            cycleYears: 33,
            monthsPerYear: 12,
            totalIntercalaryMonths: 13,
            lunarMonthDays: 29.53,
            solarYearDays: 365.2422,
            lunarYearDays: 354.37
        };

        // Years that have intercalary months (13 distributed across 33 years)
        const INTERCALARY_YEARS = [3, 5, 8, 11, 14, 16, 19, 22, 24, 27, 30, 32, 33];

        // Moon phases for each month (simplified rotation)
        const MOON_PHASES = ['üåë', 'üåì', 'üåï', 'üåó'];

        // Solar events by month
        const SOLAR_EVENTS = {
            1: 'üå∏',  // Vernal Equinox (Spring)
            4: '‚òÄÔ∏è',  // Summer Solstice
            7: 'üçÇ',  // Autumnal Equinox
            10: '‚ùÑÔ∏è'  // Winter Solstice
        };

        // Season mapping
        const SEASONS = {
            1: 'spring', 2: 'spring', 3: 'spring',
            4: 'summer', 5: 'summer', 6: 'summer',
            7: 'autumn', 8: 'autumn', 9: 'autumn',
            10: 'winter', 11: 'winter', 12: 'winter'
        };

        // Month names
        const MONTH_NAMES = [
            'Luna Prima', 'Luna Secunda', 'Luna Tertia',
            'Luna Quarta', 'Luna Quinta', 'Luna Sexta',
            'Luna Septima', 'Luna Octava', 'Luna Nona',
            'Luna Decima', 'Luna Undecima', 'Luna Duodecima'
        ];

        // State
        let currentCycle = 1;
        let showSeasons = true;
        let highlightIntercalaryMode = false;

        // ============================================
        // CALENDAR GENERATION
        // ============================================

        function generateCalendar() {
            const tbody = document.getElementById('calendar-body');
            tbody.innerHTML = '';

            let intercalaryCount = 0;

            for (let year = 1; year <= CONFIG.cycleYears; year++) {
                const row = document.createElement('tr');
                
                // Year cell
                const yearCell = document.createElement('td');
                yearCell.className = 'year-cell';
                yearCell.textContent = `Y${year}`;
                yearCell.title = `Year ${year} of Cycle ${currentCycle}`;
                row.appendChild(yearCell);

                // Month cells
                for (let month = 1; month <= CONFIG.monthsPerYear; month++) {
                    const cell = createMonthCell(year, month);
                    row.appendChild(cell);
                }

                // Intercalary cell
                const intercalaryCell = document.createElement('td');
                if (INTERCALARY_YEARS.includes(year)) {
                    intercalaryCount++;
                    intercalaryCell.className = 'month-cell intercalary intercalary-cell';
                    intercalaryCell.innerHTML = `
                        <div class="month-content">
                            <span class="month-name">I${intercalaryCount}</span>
                            <span class="moon-phase">üåë</span>
                            <span class="month-days">~30d</span>
                        </div>
                    `;
                    intercalaryCell.dataset.year = year;
                    intercalaryCell.dataset.intercalary = intercalaryCount;
                    addTooltipEvents(intercalaryCell, `Intercalary Month ${intercalaryCount}`, 
                        `Added after Year ${year}, Month 12 to maintain lunisolar alignment. This extra month ensures lunar months stay synchronized with solar seasons.`);
                } else {
                    intercalaryCell.className = 'month-cell';
                    intercalaryCell.innerHTML = '<span style="color: #ccc;">‚Äî</span>';
                }
                row.appendChild(intercalaryCell);

                tbody.appendChild(row);
            }

            highlightCurrentPeriod();
        }

        function createMonthCell(year, month) {
            const cell = document.createElement('td');
            const phaseIndex = (year + month) % 4;
            const moonPhase = MOON_PHASES[phaseIndex];
            const solarEvent = SOLAR_EVENTS[month] || '';
            const season = SEASONS[month];
            
            let className = 'month-cell';
            if (showSeasons) {
                className += ` ${season}`;
            } else {
                className += ' lunar';
            }

            cell.className = className;
            cell.dataset.year = year;
            cell.dataset.month = month;
            cell.dataset.season = season;

            cell.innerHTML = `
                <div class="month-content">
                    <span class="month-name">M${month}</span>
                    <span class="moon-phase">${moonPhase}</span>
                    <span class="month-days">~${Math.round(CONFIG.lunarMonthDays)}d</span>
                </div>
                ${solarEvent ? `<span class="solar-event">${solarEvent}</span>` : ''}
            `;

            // Add tooltip
            const seasonName = season.charAt(0).toUpperCase() + season.slice(1);
            const tooltipTitle = `${MONTH_NAMES[month - 1]}`;
            let tooltipContent = `Year ${year}, Month ${month}<br>`;
            tooltipContent += `Season: ${seasonName}<br>`;
            tooltipContent += `Moon Phase: ${getMoonPhaseName(phaseIndex)}<br>`;
            tooltipContent += `Duration: ~${CONFIG.lunarMonthDays.toFixed(2)} days`;
            if (solarEvent) {
                tooltipContent += `<br>Solar Event: ${getSolarEventName(month)}`;
            }

            addTooltipEvents(cell, tooltipTitle, tooltipContent);

            return cell;
        }

        // ============================================
        // TOOLTIP FUNCTIONS
        // ============================================

        function addTooltipEvents(element, title, content) {
            const tooltip = document.getElementById('tooltip');
            
            element.addEventListener('mouseenter', (e) => {
                document.getElementById('tooltip-title').textContent = title;
                document.getElementById('tooltip-content').innerHTML = content;
                tooltip.classList.add('visible');
                positionTooltip(e);
            });

            element.addEventListener('mousemove', positionTooltip);

            element.addEventListener('mouseleave', () => {
                tooltip.classList.remove('visible');
            });
        }

        function positionTooltip(e) {
            const tooltip = document.getElementById('tooltip');
            const offset = 15;
            let x = e.clientX + offset;
            let y = e.clientY + offset;

            // Prevent tooltip from going off-screen
            const tooltipRect = tooltip.getBoundingClientRect();
            if (x + tooltipRect.width > window.innerWidth) {
                x = e.clientX - tooltipRect.width - offset;
            }
            if (y + tooltipRect.height > window.innerHeight) {
                y = e.clientY - tooltipRect.height - offset;
            }

            tooltip.style.left = `${x}px`;
            tooltip.style.top = `${y}px`;
        }

        // ============================================
        // HELPER FUNCTIONS
        // ============================================

        function getMoonPhaseName(index) {
            const names = ['New Moon', 'First Quarter', 'Full Moon', 'Last Quarter'];
            return names[index];
        }

        function getSolarEventName(month) {
            const events = {
                1: 'Vernal Equinox',
                4: 'Summer Solstice',
                7: 'Autumnal Equinox',
                10: 'Winter Solstice'
            };
            return events[month] || '';
        }

        function highlightCurrentPeriod() {
            // Simulate current position in cycle (based on current date)
            const now = new Date();
            const dayOfYear = Math.floor((now - new Date(now.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const currentMonth = Math.ceil(dayOfYear / 30.4);
            const yearInCycle = (now.getFullYear() % 33) || 33;

            // Find and highlight current cell
            const cells = document.querySelectorAll('.month-cell');
            cells.forEach(cell => {
                cell.classList.remove('current');
                if (cell.dataset.year == yearInCycle && cell.dataset.month == currentMonth) {
                    cell.classList.add('current');
                }
            });
        }

        // ============================================
        // CONTROL FUNCTIONS
        // ============================================

        function previousCycle() {
            if (currentCycle > 1) {
                currentCycle--;
                document.getElementById('cycle-number').textContent = currentCycle;
                generateCalendar();
                showNotification(`Viewing Cycle ${currentCycle}`);
            }
        }

        function nextCycle() {
            currentCycle++;
            document.getElementById('cycle-number').textContent = currentCycle;
            generateCalendar();
            showNotification(`Viewing Cycle ${currentCycle}`);
        }

        function toggleSeasonView() {
            showSeasons = !showSeasons;
            generateCalendar();
            showNotification(showSeasons ? 'Season colors enabled' : 'Standard lunar view');
        }

        function highlightIntercalary() {
            highlightIntercalaryMode = !highlightIntercalaryMode;
            const cells = document.querySelectorAll('.intercalary');
            
            cells.forEach(cell => {
                if (highlightIntercalaryMode) {
                    cell.style.animation = 'pulse 1s infinite';
                    cell.style.transform = 'scale(1.1)';
                } else {
                    cell.style.animation = '';
                    cell.style.transform = '';
                }
            });
            
            showNotification(highlightIntercalaryMode ? 'Intercalary months highlighted' : 'Highlight removed');
        }

        function resetCalendar() {
            currentCycle = 1;
            showSeasons = true;
            highlightIntercalaryMode = false;
            document.getElementById('cycle-number').textContent = currentCycle;
            generateCalendar();
            showNotification('Calendar reset to Cycle 1');
        }

        // ============================================
        // NOTIFICATION FUNCTION
        // ============================================

        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: var(--color-primary);
                color: white;
                padding: 1rem 2rem;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 1001;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;

            // Add animation keyframes
            if (!document.getElementById('notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }

            document.body.appendChild(notification);

            // Remove after 2 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        // ============================================
        // KEYBOARD SHORTCUTS
        // ============================================

        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowLeft':
                    previousCycle();
                    break;
                case 'ArrowRight':
                    nextCycle();
                    break;
                case 's':
                case 'S':
                    toggleSeasonView();
                    break;
                case 'i':
                case 'I':
                    highlightIntercalary();
                    break;
                case 'r':
                case 'R':
                    resetCalendar();
                    break;
            }
        });

        // ============================================
        // INITIALIZATION
        // ============================================

        document.addEventListener('DOMContentLoaded', () => {
            generateCalendar();
            
            // Add keyboard shortcut hint
            console.log('%cüåå Solarium Calendar Keyboard Shortcuts:', 'font-size: 14px; font-weight: bold;');
            console.log('‚Üê ‚Üí : Navigate cycles');
            console.log('S   : Toggle season view');
            console.log('I   : Highlight intercalary months');
            console.log('R   : Reset calendar');
        });
    </script>
</body>
</html>